
:: this script is autogenerated by 'gradle startscripts'
:: it starts a las2peer node providing the service 'i5.las2peer.services.contactService.ContactService' of this project
:: pls execute it from the bin folder of your deployment by double-clicking on it

%~d0
cd %~p0
cd ..
set BASE=%CD%
set CLASSPATH="%BASE%/lib\*;"

For /F "tokens=1* delims==" %%A IN (%BASE%/etc/i5.las2peer.services.contactService.ContactService.properties) DO (
    IF "%%A"=="contactStorerAgentName" set contactStorerAgentName=%%B
    IF "%%A"=="contactStorerAgentName " set contactStorerAgentName=%%B
)


For /F "tokens=1* delims==" %%A IN (%BASE%/etc/i5.las2peer.services.contactService.ContactService.properties) DO (
    IF "%%A"=="contactStorerAgentPW" set contactStorerAgentPW=%%B
    IF "%%A"=="contactStorerAgentPW " set contactStorerAgentPW=%%B
)
IF "%contactStorerAgentName%"=="" set contactStorerAgentName=contactStorerAgent
IF "%contactStorerAgentPW%"=="" set contactStorerAgentPW=contactStorerAgentPW

echo agent-user-contact.xml;%contactStorerAgentPW% >>  %BASE%\etc\startup\passphrases.txt
echo "%contactStorerAgentName%"
echo "%BASE%"
java -cp %CLASSPATH% i5.las2peer.tools.UserAgentGenerator %contactStorerAgentPW% %contactStorerAgentName% > %BASE%/etc/startup/agent-user-contact.xml && java -cp %CLASSPATH% i5.las2peer.tools.L2pNodeLauncher --port 9012 -b 192.168.56.1:9011 --service-directory service uploadStartupDirectory startService('i5.las2peer.services.contactService.ContactService@1.0.0') interactive

pause
